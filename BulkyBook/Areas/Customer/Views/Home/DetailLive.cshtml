@model BulkyBook.Models.ViewModels.BusinessProfileVM
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager

@{
    ViewData["Title"] = "User details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*@if (Model.address.UserId == null)*@
@if (!SignInManager.IsSignedIn(User))
{
    <style>
        .blur {
            -webkit - filter: blur(3px);
            -moz - filter: blur(3px);
            -o - filter: blur(3px);
            -ms - filter: blur(3px);
            filter: blur(3px);
        }
    </style>

}


<!-- Header Container / End -->
<link href="~/css/FAQ.css" rel="stylesheet" />
<link href="~/css/ReviewDropdown.css" rel="stylesheet" />
<div>
    <div class="swiper-container">
        @*<div class="swiper-wrapper">
                @foreach (var item in Model.BusinessImage)
                {
                    <div class="swiper-slide">
                        <a class="grid image-link">
                            <img src="@item.Image" class="img-fluid" alt="#">
                        </a>
                    </div>
                }
            </div>*@

        <div class="swiper-pagination swiper-pagination-white"></div>
        <div class="swiper-button-next swiper-button-white mr-3"></div>
        <div class="swiper-button-prev swiper-button-white ml-3"></div>
    </div>
</div>
<!-- END SECTION HEADINGS -->
<!-- START SECTION LISTING DETAIL-->
<section class="listing blog details">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-12 blog-pots">
                <!-- Block heading end -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="detail-wrapper">
                            <div class="detail-wrapper-body">
                                <div class="listing-title-bar">
                                    <h2>@Model.Business.Name @*<span class="mrg-l-5 category-tag">Eat &amp; Drink</span>*@</h2>
                                    <div class="mt-3">

                                        <div class="row blur">

                                            <div class="col-12">
                                                @foreach (var address in Model.addressTable)
                                                {
                                                    <a href="#listing-location" class="listing-address">
                                                        <i class="fa fa-map-marker pr-2 ti-location-pin mrg-r-5"></i> @address.HouseNo,&nbsp; @address.AddressField,&nbsp; @address.AreaStreet,&nbsp; @address.CityTown,&nbsp; @address.StateProvinceRegion,&nbsp; @address.Country,&nbsp; @address.Pincode<br />
                                                    </a>
                                                }



                                                <div class="row">
                                                    <div class="col" style="margin-top:5px;">

                                                        @foreach (var email in Model.emailTable)
                                                        {

                                                            <i class="fa fa-envelope" aria-hidden="true"></i>
                                                            <a style="font-weight:500" href="mailto:@email.EmailAddress">@email.EmailAddress</a>


                                                        }

                                                    </div>
                                                </div>


                                                <div class="row">
                                                    <div class="col" style="margin-top:5px;">

                                                        @foreach (var mobile in Model.mobileTable)
                                                        {

                                                            <i class="fa fa-phone" aria-hidden="true"></i>
                                                            <a href="tel:@mobile.MobileNo">@mobile.MobileNo</a>

                                                        }
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col" style="margin-top:5px;">


                                                        @foreach (var landline in Model.landlineTable)
                                                        {

                                                            <i class="fa fa-phone-volume" aria-hidden="true"></i>
                                                            <a href="tel:">@landline.LandlineNo</a>

                                                        }
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col" style="margin-top:5px;">

                                                        @foreach (var website in Model.locationTable)
                                                        {

                                                            <i class="fa fa-link" aria-hidden="true"></i>
                                                            <a href="https://@website.Website" target="_blank">@website.Website</a>

                                                        }

                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col" style="margin-top:5px;">

                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="listingDetailsSlider" class="carousel listing-details-sliders slide mb-30">
                            <h5 class="mb-4">Gallery</h5>
                            <div class="carousel-inner">
                                @{int i = 0;}
                                @foreach (var item in Model.BusinessImage)
                                {
                                    if (i == 0)
                                    {
                                        <div class="active item carousel-item" data-slide-number="@i">
                                            <img src="@item.Image" class="img-fluid" alt="slider-listing">
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="item carousel-item" data-slide-number="@i">
                                            <img src="@item.Image" class="img-fluid" alt="slider-listing">
                                        </div>
                                    }
                                    i++;
                                    <a class="carousel-control left" href="#listingDetailsSlider" data-slide="prev"><i class="fa fa-angle-left"></i></a>
                                    <a class="carousel-control right" href="#listingDetailsSlider" data-slide="next"><i class="fa fa-angle-right"></i></a>

                                }
                            </div>
                            <ul class="carousel-indicators smail-listing list-inline">
                                @{ i = 0;}
                                @foreach (var item in Model.BusinessImage)
                                {
                                    <li class="list-inline-item">
                                        <a id="carousel-selector-@i" class="selected" data-slide-to="@i" data-target="#listingDetailsSlider">
                                            <img src="@item.Image" class="img-fluid" alt="listing-small">
                                        </a>
                                    </li>
                                    i++;
                                }
                            </ul>
                            <!-- main slider carousel items -->
                        </div>

                        <div class="blog-info details overview">
                            <h5 class="mb-4">Description</h5>
                            <p class="mb-3">@Model.Business.Description</p>
                        </div>
                    </div>
                </div>

            </div>
            <br />
            <div class="row">
                <div class="col-6">
                    <h2 class="text-primary">Other Rating</h2>
                </div>
                <div class="col-6 text-right">
                    <a class="btn btn-primary" @*asp-action="Upsert"*@><i class="fas fa-plus"></i> @*&nbsp;*@ Create New OtherRating</a>
                </div>
            </div>

            <br />
            <div class="p-4 border rounded">
                <table id="tblData" class="table table-striped table-bordered" style="width:100%">
                    <thead class="thead-dark">
                        <tr class="table-info">
                            <th>CategoryName</th>
                            <th>Name</th>
                            <th></th>
                        </tr>
                    </thead>
                </table>
            </div>
            <aside class="col-lg-4 col-md-12 car">
                <div class="widget">

                    <div class="property-location mp" style="width:600px;height:400px">
                        <h5>Location</h5>
                        <div class="divider-fade"></div>





                        <div class="widget-boxed mt-5">
                            <div class="widget-boxed-header">
                                <h4><i class="fa fa-clock-o pr-3 padd-r-10"></i>Opening Hours</h4>
                            </div>
                            <div class="widget-boxed-body">
                                <div class="side-list">
                                    <ul>
                                        <li class="pt-0">Monday <span>@Model.BusinessHour.MondayFrom -  @Model.BusinessHour.MondayTo </span></li>
                                        <li>Tuesday <span>@Model.BusinessHour.TuesdayFrom -  @Model.BusinessHour.TuesdayTo </span></li>
                                        <li>Wednesday <span>@Model.BusinessHour.WednesdayFrom -  @Model.BusinessHour.WednesdayTo</span></li>
                                        <li>Thursday <span>@Model.BusinessHour.ThrusdayFrom -  @Model.BusinessHour.ThrusdayTo</span></li>
                                        <li>Friday <span>@Model.BusinessHour.FridayFrom -  @Model.BusinessHour.FridayTo</span></li>
                                        <li>Saturday <span>@Model.BusinessHour.SaturdayFrom  - @Model.BusinessHour.SaturdayTo</span></li>
                                        <li>Sunday <span>@Model.BusinessHour.SundayFrom - @Model.BusinessHour.SundayTo </span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        @if (Model.BusinessKeyword != null)
                        {
                            <div class="recent-post tags">
                                <div class="widget-boxed-header">
                                    <h4><i class="fas fa-tags pr-3"></i>Popular Tags</h4>
                                </div>
                                <div class="widget-boxed-body">

                                    @foreach (var item in Model.BusinessKeyword.Description.Split(','))
                                    {<div class="tags">

                                            <span><a class="btn btn-outline-primary mr-2" asp-action="Index" asp-route-searchstring="@item">@item</a></span>

                                        </div>
                                    }

                                </div>
                            </div>
                        }
                    </div>
            </aside>
        </div>
    </div>
</section>
<!-- END SECTION LISTING DETAIL -->
@section Scripts{

    <script>
        var acc = document.getElementsByClassName("accordion");
        var i;

        for (i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function () {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                }
            });
        }
    </script>

}
